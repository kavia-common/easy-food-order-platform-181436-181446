{"is_source_file": true, "format": "Python", "description": "This Python source file sets up authentication-related API endpoints using FastAPI, providing user registration, login, and current user retrieval via JWT tokens.", "external_files": ["../database", "../models", "../schemas", "../utils/security"], "external_methods": ["get_async_session", "get_password_hash", "verify_password"], "published": ["get_current_user"], "classes": [], "methods": [{"name": "str _get_jwt_secret()", "description": "Retrieves the JWT secret key from environment variables or defaults to 'devsecret'.", "scope": "", "scopeKind": ""}, {"name": "int _get_access_token_expires_minutes()", "description": "Retrieves the token expiration time in minutes from environment variables or defaults to 60.", "scope": "", "scopeKind": ""}, {"name": "str _create_access_token(data: dict, expires_delta: Optional[timedelta] = None)", "description": "Creates a signed JWT token with user data and expiry.", "scope": "", "scopeKind": ""}, {"name": "register(payload: UserCreate, session: AsyncSession = Depends(get_async_session))", "description": "API endpoint for registering a new user.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends(), session: AsyncSession = Depends(get_async_session))", "description": "API endpoint for user login that returns a JWT token.", "scope": "", "scopeKind": ""}, {"name": "User get_current_user(token: str = Depends(...), session: AsyncSession = Depends(get_async_session))", "description": "Retrieves the current user based on the provided JWT token.", "scope": "", "scopeKind": ""}], "calls": ["select(User).where(User.email == payload.email)", "session.execute(select(User).where(User.email == str(email)))", "jwt.encode(to_encode, _get_jwt_secret(), algorithm=ALGORITHM)", "jwt.decode(token, _get_jwt_secret(), algorithms=[ALGORITHM])"], "search-terms": ["auth API", "JWT authentication", "FastAPI auth router", "user registration", "token creation"], "state": 2, "file_id": 9, "knowledge_revision": 73, "git_revision": "da0ed80d948638cbb249bf1b9aa8f0b989cbe509", "ctags": [{"_type": "tag", "name": "ALGORITHM", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^ALGORITHM = \"HS256\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_create_access_token", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^def _create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(data: dict, expires_delta: Optional[timedelta] = None)"}, {"_type": "tag", "name": "_get_access_token_expires_minutes", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^def _get_access_token_expires_minutes() -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_jwt_secret", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^def _get_jwt_secret() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^async def get_current_user(token: str = Depends(...), session: AsyncSession = Depends(get_async_/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(token: str = Depends(...), session: AsyncSession = Depends(get_async_session))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^async def login(form_data: OAuth2PasswordRequestForm = Depends(), session: AsyncSession = Depend/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), session: AsyncSession = Depends(get_async_session))"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^async def register(payload: UserCreate, session: AsyncSession = Depends(get_async_session)):$/", "language": "Python", "kind": "function", "signature": "(payload: UserCreate, session: AsyncSession = Depends(get_async_session))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/easy-food-order-platform-181436-181446/food_ordering_backend/src/api/routers/auth.py", "pattern": "/^router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])$/", "language": "Python", "kind": "variable"}], "hash": "260db5d0ec9198ac2ee4e45d2a00f888", "format-version": 4, "code-base-name": "food_ordering_backend", "filename": "food_ordering_backend/src/api/routers/auth.py", "fields": [{"name": "ALGORITHM = \"HS256\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/auth\", tags=[\"Auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"73": "da0ed80d948638cbb249bf1b9aa8f0b989cbe509"}]}